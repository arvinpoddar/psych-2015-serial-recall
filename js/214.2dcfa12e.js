"use strict";(self["webpackChunkserial_recall"]=self["webpackChunkserial_recall"]||[]).push([[214],{9151:(e,t,l)=>{l.d(t,{fo:()=>n,xM:()=>s,Nr:()=>a,qw:()=>i,q$:()=>c});const n=9,s=2e4,a=["705182068","270422424","801183068","954052592","790244282","926493674","606918360"],i=["166348227","367781030","784794977","038318849","093586098","946167344","463243126"],c=["543565783","626488917","702948703","702255336","801576895","868654083","609960028"]},8214:(e,t,l)=>{l.r(t),l.d(t,{default:()=>O});var n=l(3673);const s={class:"row"},a={class:"testing-page flex column flex-center"},i={key:0,class:"text-center"},c=(0,n._)("div",{class:"q-mb-lg"}," You can now take a short break! You can click the button below to continue, or wait for the researcher to instruct you when to continue. ",-1),u={key:2,class:"text-center"},r=(0,n._)("div",{class:"q-mb-lg"}," Thank you for completing the study! Please alert the researcher that you are done. DO NOT CLOSE THIS PAGE. ",-1);function o(e,t,l,o,p,d){const h=(0,n.up)("q-space"),g=(0,n.up)("q-btn"),f=(0,n.up)("Sequence"),v=(0,n.up)("q-page");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",s,[(0,n.Wm)(h),(0,n.Wm)(g,{icon:"save","text-color":"primary",size:"sm",onClick:e.saveCSV,flat:"",dense:""},null,8,["onClick"])]),(0,n.Wm)(v,{class:"flex flex-center"},{default:(0,n.w5)((()=>[(0,n._)("div",a,[e.showBreakScreen?((0,n.wg)(),(0,n.iD)("div",i,[c,(0,n.Wm)(g,{label:"Continue",color:"primary",size:"lg","no-caps":"",onClick:t[0]||(t[0]=t=>e.showBreakScreen=!1)})])):e.currentIndex<e.sequences.length?((0,n.wg)(),(0,n.j4)(f,{key:1,sequence:e.currentSequence,displayDigitMs:750,digitGapMs:250,onComplete:e.goToNextSequence},null,8,["sequence","onComplete"])):((0,n.wg)(),(0,n.iD)("div",u,[r,(0,n.Wm)(g,{icon:"save",label:"Save CSV Data",color:"primary",onClick:e.saveCSV,"no-caps":""},null,8,["onClick"])]))])])),_:1})],64)}l(71);var p=l(1959),d=l(9582),h=l(3139),g=l(8825),f=l(9151),v=l(2323);const m={class:"sequence-outer"},w={class:"display-digit"},b=(0,n._)("div",{class:"input-instructions"}," Enter the full sequence as you recall: ",-1),q={key:1,style:{height:"52px"}};function y(e,t,l,s,a,i){const c=(0,n.up)("SequenceInput"),u=(0,n.up)("q-btn"),r=(0,n.up)("q-form");return(0,n.wg)(),(0,n.iD)("div",m,[(0,n._)("div",w,(0,v.zw)(e.firstDigit),1),e.sequenceFinished?((0,n.wg)(),(0,n.j4)(r,{key:0,onSubmit:e.submitUserSequence,class:"sequence-input"},{default:(0,n.w5)((()=>[b,(0,n.Wm)(c,{onUpdate:e.captureUserSequence,class:"q-my-lg"},null,8,["onUpdate"]),9===e.userSequence.length?((0,n.wg)(),(0,n.j4)(u,{key:0,color:"primary",size:"lg","no-caps":"",type:"submit",label:"Submit"})):((0,n.wg)(),(0,n.iD)("div",q))])),_:1},8,["onSubmit"])):(0,n.kq)("",!0)])}const D={class:"row items-center q-gutter-x-md mobile-verify"},k=["value","onInput","onKeydown","onpaste","disabled"];function S(e,t,l,s,a,i){return(0,n.wg)(),(0,n.iD)("div",D,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.cells,((l,s)=>((0,n.wg)(),(0,n.iD)("input",{key:s,value:l,ref_for:!0,ref:e.cellRefs[s],class:"col ig-input mobile-cell",outlined:"",onClick:t[0]||(t[0]=(...t)=>e.handleFocus&&e.handleFocus(...t)),onFocus:t[1]||(t[1]=(...t)=>e.handleFocus&&e.handleFocus(...t)),onInput:t=>e.handleInput(t,s),onKeydown:t=>e.handleKeyDown(t,s),onpaste:t=>e.handlePaste(t,s),maxlength:"1",pattern:"[0-9]",autocomplete:"2fa",inputmode:"numeric",disabled:e.disabled,ondrop:"return false;"},null,40,k)))),128))])}l(5363);const C={backspace:8,left:37,up:38,right:39,down:40},x=f.fo,I=[],T=[];for(let z=0;z<x;z++)I.push(""),T.push(`cell_${z}`);const $=(0,n.aZ)({name:"TwoFactorVerificationInput",props:{disabled:{type:Boolean,default:!1}},data(){return{numCells:x,cells:I,cellRefs:T}},methods:{handleFocus(e){e&&e.target&&(e.preventDefault(),setTimeout((function(){e.target.setSelectionRange(0,9999)}),1))},getPasteText(e){let t;return window.clipboardData&&window.clipboardData.getData?t=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData&&(t=e.clipboardData.getData("text/plain")),t.replace(/\D/g,"")},handlePaste(e,t){e.preventDefault();const l=this.getPasteText(e),n=[...this.cells];for(let a=t,i=0;a<n.length&&i<l.length;a++)n[a]=l[i],i++;const s=Math.min(this.numCells-1,t+l.length-1);this.focusInput(s),this.cells=n,this.triggerUpdate(s)},handleInput(e,t){if(e.target.value=e.target.value.replace(/[^\d]/gi,""),""===e.target.value||!e.target.validity.valid)return;if("insertFromPaste"===e.inputType)return void e.preventDefault();let l;const n=e.target.value;let s=this.cells;if(s=Object.assign([],s),n.length>1){let e=n.length+t-1;e>=this.numCells&&(e=this.numCells-1),l=this.getCellRef(e);const a=n.split("");a.forEach(((e,l)=>{const n=t+l;n<this.numCells&&(s[n]=e)})),this.cells=s,this.triggerUpdate(t)}else l=this.getCellRef(t+1),s[t]=n,this.cells=s,this.triggerUpdate(t);l&&(l.focus(),l.select())},handleKeyDown(e,t){const l=t-1,n=t+1,s=this.cellRefs[l];switch(e.keyCode){case C.backspace:{e.preventDefault();const n=[...this.cells];this.cells[t]?(n[t]="",this.cells=n,this.triggerUpdate(t)):s&&(n[l]="",this.focusInput(l),this.cells=n,this.triggerUpdate(t));break}case C.left:e.preventDefault(),this.focusInput(l);break;case C.right:e.preventDefault(),this.focusInput(n);break;case C.up:case C.down:e.preventDefault();break;default:break}},getCellRef(e){if(e>=0&&e<this.numCells){if(this.cellRefs[e]){const t=this.cellRefs[e];return this.$refs[t][0]}return null}return null},focusInput(e){const t=this.getCellRef(e);t&&t.focus()},triggerUpdate(e=0){const t=this.cells.join("");this.$emit("update",t),t.length===this.numCells&&e===this.cellRefs.length-1&&this.$emit("complete",t)},resetVerification(){for(let e=0;e<x;e++)this.cells[e]="";this.focusInput(0),this.triggerUpdate(0)}},mounted(){this.$nextTick((()=>{this.focusInput(0)}))}});var P=l(4260);const U=(0,P.Z)($,[["render",S]]),F=U,Z=(0,n.aZ)({name:"Sequence",props:{sequence:String,displayDigitMs:{type:Number,default:750},digitGapMs:{type:Number,default:250}},components:{SequenceInput:F},setup(e,t){const{sequence:l,displayDigitMs:s,digitGapMs:a}=(0,p.BK)(e),i=(0,p.iH)(""),c=(0,p.iH)(!1),u=e=>new Promise((t=>setTimeout(t,e))),r=async()=>{i.value="",c.value=!1,await u(s.value);for(let e=0;e<l.value.length;e++)i.value="",await u(a.value),i.value=l.value[e],await u(s.value);i.value="",c.value=!0,g()},o=(0,p.iH)(""),d=e=>{o.value=e},h=(0,p.iH)(null),g=()=>{h.value=setTimeout((()=>{m()}),f.xM)},v=()=>{h.value&&clearTimeout(h.value)},m=()=>{o.value=o.value.padEnd(f.fo,"0"),w()},w=()=>{o.value.length===f.fo&&(console.log(o.value),t.emit("complete",o.value),o.value="",v())};return(0,n.YP)(l,(()=>r())),(0,n.bv)((()=>r())),{firstDigit:i,userSequence:o,sequenceFinished:c,captureUserSequence:d,submitUserSequence:w}}});var _=l(5269),H=l(3187),R=l(7518),M=l.n(R);const B=(0,P.Z)(Z,[["render",y]]),N=B;M()(Z,"components",{QForm:_.Z,QBtn:H.Z});const V=9,j=19,E=(0,n.aZ)({name:"PageIndex",components:{Sequence:N},setup(){const e=(0,g.Z)(),t=(0,d.yj)(),l=t.params.order,s=t.params.condition,a=l.split("-"),i=(0,p.iH)(null),c=()=>{const e={low:f.Nr,med:f.qw,high:f.q$},t=[...e[a[0]],...e[a[1]],...e[a[2]]];i.value=t},u=(0,p.iH)(0),r=(0,n.Fl)((()=>i.value[u.value])),o=e=>{w(r.value,e),u.value++},v=(e,t)=>{const l=Math.min(e.length,t.length);let n=0;for(let s=0;s<l;s++)e[s]===t[s]&&n++;return{correct:n,length:l,percentage:n/l}},m=(0,p.iH)("Actual,User Input,Volume,Correct Positions,Accuracy %"),w=(e,t)=>{let l="";l=u.value<=V?a[0]:u.value<=j?a[1]:a[2];const{correct:n,percentage:s}=v(e,t);m.value+=`\n'${e}','${t}',${l},${n},${s}`},b=()=>{e.dialog({title:"Save data",message:"Enter participant ID:",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk((e=>{const t=new Blob([m.value],{type:"text/plain;charset=utf-8"});(0,h.saveAs)(t,`${e}-${s}-${l}.csv`)}))},q=(0,p.iH)(!1);return(0,n.YP)(u,(()=>{const e=[V,j].includes(u.value);e&&(q.value=!0)})),(0,n.wF)((()=>c())),{sequences:i,currentIndex:u,currentSequence:r,showBreakScreen:q,goToNextSequence:o,saveCSV:b}}});var K=l(1598),Q=l(2025),W=l(4379);const Y=(0,P.Z)(E,[["render",o]]),O=Y;M()(E,"components",{QLinearProgress:K.Z,QBtn:H.Z,QSpace:Q.Z,QPage:W.Z})}}]);